tree("Root")
	repeat
		mute
			fallback
				tree "To Box Grab"
				tree "Grab Object"
				tree "Drop Object"
				tree "Navigation"				



tree("To Box Grab")
	while
		sequence
			AtBoxSource
			not HasObjectGrabbed
			not HasArrived
			not ObjectInTrigger
		sequence
			EnableDetector
			MoveDownAnimation

tree ("Grab Object")
	while
		sequence
			AtBoxSource
			not HasObjectGrabbed
			HasArrived
		fallback
			while not ObjectInTrigger
				sequence
					DoReleaseAnimation
					MoveDownAnimation
			while ObjectInTrigger
				sequence
					DoGrabAnimation			
					Wait(0.3)
					GrabObject
					MoveUpAnimation
					DisableDetector
			

tree ("Drop Object")
	while
		sequence
			not AtBoxSource
			HasObjectGrabbed
			HasArrived
		sequence
			DoReleaseAnimation
			DropObject

		



tree("Navigation")
	fallback
		tree "To Box Source"
		tree "To Cardboard Chute"
		tree "To Explosive Chute"
		tree "To Heavy Chute"


tree("To Box Source")
	while
		sequence
			not HasObjectGrabbed
			NoNewLocation
		GoToBoxSource

tree ("To Cardboard Chute")
	while
		sequence
			HasObjectGrabbed
			HasCardboardBox
			NoNewLocation
		GoToCardboardChute

tree ("To Explosive Chute")
	while
		sequence
			HasObjectGrabbed
			HasExplosiveBox
			NoNewLocation
		GoToExplosiveChute


tree ("To Heavy Chute")
	while
		sequence
			HasObjectGrabbed
			HasHeavyBox
			NoNewLocation
		GoToHeavyChute